<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>

<link rel="stylesheet" href="./estilos.css">
    <title>Alta de concentradores</title>
</head>
<body>
<div class="container mt-4 py-2 contenedorTabla" style="position: relative;">

    <div class="text-center">
      <h3 class="w-100 text-center">Alta de concentradores</h3>
      <h6 id="txtUsuario" class="w-100 text-center">usuario: </h6>
      <a id="btnCerrarSesion" class="w-100 text-center bg-black">cerrar sesion</a>
    </div>

    <div class="accordion accordion-flush my-4" id="accordionFlushExample">
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingOne">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
            Formulario Alta concentrador
          </button>
        </h2>
        <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            <div class="container">
              <form>
                <div class="row">
                  <div class="mb-3 col-md-6">
                    <label for="" class="col-form-label">Nro. concentrador:</label>
                    <input id="nroConcentrador" class="form-control" type="number" autofocus>
                </div>
                <div class="mb-3 col-md-6">
                  <label for="" class="col-form-label">Fecha alta:</label>
                  <input id="fechaAlta" class="form-control" type="date" >
              </div>
                </div>
      
                  <div class="mb-3">
                      <label for="" class="col-form-label">Localidad:</label>
                      <input id="localidad" class="form-control" type="text" >
                  </div>
      
                  <div class="row">
                    <div class="mb-3 col-md-6">
                      <label for="" class="col-form-label">Calle:</label>
                      <input id="calle" class="form-control" type="text" >
                    </div>
                    <div class="mb-3 col-md-6">
                      <label for="" class="col-form-label">Altura:</label>
                      <input id="altura" class="form-control" type="text" >
                    </div>
                  </div>
      
                  <div class="mb-3">
                      <label for="" class="col-form-label">dirección IP:</label>
                      <input id="dirIP" class="form-control" type="text" >
                  </div>
      
                  <div class="row">
                    <div class="mb-3 col-md-4">
                      <label for="" class="col-form-label">nro usuarios monofásicos:</label>
                      <input id="nroUsuMono" class="form-control" type="number" >
                    </div>
          
                    <div class="mb-3 col-md-4">
                      <label for="" class="col-form-label">nro usuarios trifásicos:</label>
                      <input id="nroUsuTri" class="form-control" type="number" >
                    </div>
          
                    <div class="mb-3 col-md-4">
                      <label for="" class="col-form-label">nro alumbrados:</label>
                      <input id="nroAl" class="form-control" type="number" >
                    </div>
                  </div>
      
                <div class="mb-4">
                  <label for="" class="col-form-label">observaciones:</label>
                  <textarea class="form-control" id="observaciones" cols="30" rows="5"></textarea>
      
                </div>
                  <div class="container text-center">
                      <button id="btnGuardar" class="btn btn-success mb-4" type="submit">Guardar</button>
                      <br>
                      <span style="display:none;" id="infoGuardar"> </span>
                  </div>
      
              </form>
          </div>
          </div>
        </div>
      </div>

      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
            Búsqueda
          </button>
        </h2>
        <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
          <div class="accordion-body">
            <div class="container">
              <form >
                <div class="row">
                  <div class="mb-3 col-md-4">
      
                    <label for="" class="col-form-label">Búsqueda:</label>
                    <input id="inputBusqueda" class="form-control" type="text" >
                    <select id="selectBusqueda" class="form-select mt-3" aria-label="Default select example">
                      <option value="" disabled selected>Elija una opción de búsqueda:</option>
                      <option value="nroConcentrador" >Nro. concentrador</option>
                    </select>
                  </div>
                  <div class="row w-100 m-0 p-0">
                    <div class="col-md-4">
                      <button id="btnBuscar" class="btn btn-primary float-start" type="button">Buscar</button>
                      <button id="btnQuitFiltro" class="btn btn-warning float-end" type="button">Quitar filtro</button>
                      <br>
                      <span style="display:none;" id="infoGuardar"> </span>
                    </div>
      
                </div>
                </div>
              </form>
      
            </div>
            </div>
          </div>
        </div>


    </div>

    <hr>

        <div class="row infoTabla d-flex align-items-end">
          <div class="mb-3 col-10">

            <div class="row" >
              <div class="col-sm-12">
                <span id="txtInfoBusqueda" style="display:none;">Filtro de búsqueda: </span><span style="font-weight: bold;" id="txtInfoBusquedaParam"></span>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12 h-100">
                <span>Concentradores en base de datos: </span><span style="font-weight: bold;" id="txtTotalCon"></span>
              </div>
            </div>
          </div>
          <div class="mb-3 col-2">
            <a id="btnDescargaLista" title="Descargar planilla"><img src="./imagenes/ods.png" style="width: 40px; float: right; cursor: pointer;" alt=""></a>            
          </div>
        </div>

        <table id="tablaConcentradores" class="table table-dark mt-2 table-bordered table-striped">
            <thead class="table-dark">
                <tr class="text-center">
                    <th>nro concentrador</th>
                    <th>ubicacion</th>
                    <th>IP</th>
                    <th>+info</th>
                    <th>Borrar</th>
                </tr>
            </thead>

            <tbody class="table-group-divider">

            </tbody>

        </table>
        <span id="spanCargando" style="display: none; font-weight: bold; margin-bottom: 20px;" class="w-100 text-center">
            Cargando tabla, espere unos instantes...
        </span>

        <nav aria-label="Page navigation example">
          <ul class="pagination pagination-sm justify-content-center">
            <li class="page-item">
              <a class="page-link" href="#" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>

          </ul>
        </nav>
    </div>
</div>


<div class="modal fade modalMasInfo" id="modalMasInfo" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New message</h5>
        <button type="button" class="btn-close btnCerrarModal" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="text-end" style="font-size:12px;">
            <label for="recipient-name" class="col-form-label">Agregado por:</label>
            <span id="spanUsuario"></span>
            
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">fecha alta:</label>
            <span class="input-group-text spanMod" id="spanFecha"></span>
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">nro serie:</label>
            <span class="input-group-text spanMod" id="spanNro"></span>
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label labelUbicacion" >ubicación:</label>
            <span class="input-group-text spanMod" id="spanUbi"></span>

          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">IP:</label>
            <span class="input-group-text spanMod" id="spanIP"></span>
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">usuarios monofásicos:</label>
            <span class="input-group-text spanMod" id="spanUMono"></span>
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">usuarios trifásicos:</label>
            <span class="input-group-text spanMod" id="spanUTri"></span>
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">alumbrados:</label>
            <span class="input-group-text spanMod" id="spanNroAl"></span>
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">total usuarios:</label>
            <span class="input-group-text" id="spanTotal"></span>
          </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-labelObser">observaciones:</label>
            <br>
            <span class="spanMod" id="spanObser"></span>
          </div>
        </form>
      </div>
      <div class="modal-footer-mod p-3">
        <button type="button" id="btnModificar" class="btn btn-success" data-bs-target="#modalActualizarConcentrador" data-bs-toggle="modal">Modificar</button>
        <button type="button" class="btn btn-secondary float-end btnCerrarModal" data-bs-dismiss="modal">Cerrar</button>

      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalActualizarConcentrador" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalToggleLabel2"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="formActualizaConcentrador">
        <div class="modal-body">
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">fecha alta:</label>
            <input id="inputModFecha" name="fecha_alta" class="form-control inputMod" type="date">
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label labelUbicacion" >Localidad:</label>
            <input id="inputModLocalidad" name="localidad" placeholder="Localidad" class="form-control inputMod" type="text">
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">calle:</label>
            <input id="inputModCalle" name="calle" placeholder="Calle" class="form-control inputMod" type="text">
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">altura:</label>
            <input id="inputModAltura" name="altura" placeholder="Altura" class="form-control inputMod" type="text">
          </div>
          <div class="input-group mb-3">
            <label for="recipient-name" class="col-form-label">IP:</label>
            <input id="inputModIp" name="ip" class="form-control inputMod" type="text">
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">usuarios monofásicos:</label>
            <input id="inputModUMono" name="nro_usuarios_mono" class="form-control inputMod" type="number">
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">usuarios trifásicos:</label>
            <input id="inputModUTri" name="nro_usuarios_tri" class="form-control inputMod" type="number">
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-label">alumbrados:</label>
            <input id="inputModAl" name="nro_alumbrados" class="form-control inputMod" type="number">
          </div>
          <div class="input-group mb-3">
            <label for="message-text" class="col-form-labelObser">observaciones:</label>
            <textarea class="form-control inputMod" name="observaciones" id="inputModObser" cols="30" rows="5"></textarea>
          </div>
        </div>
        <div class="modal-footer-mod p-3">
          <button class="btn btn-success" type="submit">confirmar actualización</button>
          <button class="btn btn-primary float-end" data-bs-target="#modalMasInfo" data-bs-toggle="modal" type="button">volver</button>

        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade modalRegCambios" id="modalRegCambios" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Registro de cambios</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <!-- Scrollable modal -->

      <div class="modal-body modal-body-RegCambios my-0">

      </div>

      <div class="modal-footer-mod p-3">
        <button type="button" class="btn btn-secondary float-end" data-bs-dismiss="modal">Cerrar</button>

      </div>
    </div>
  </div>
</div>

<footer style="width:100%; text-align: center;">
<br>
<a>by maxinz</a> 
<a style="cursor: pointer;" class="btnRegCambios"><i style="color:greenyellow; font-size: 20px;" class="fa-solid fa-circle-info"></i></a>

</footer>

<script src="FileSaver.js"></script>
<script lang="javascript" src="xlsx.full.min.js"></script>
<script src="https://kit.fontawesome.com/f8fec4fe05.js" crossorigin="anonymous"></script>
<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

<script src="./codigo.js" type="module"></script>

</body>
</html>